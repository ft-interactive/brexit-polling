<svg width="{{width}}" height="{{height}}">
{% if metricEmbed %}
<style>
@font-face {
    font-family: "MetricWeb-Semibold";
    src: url("https://build.origami.ft.com/files/o-fonts-assets@1.2.0/MetricWeb-Semibold.woff");
}
@font-face {
    font-family: "MetricWeb";
    src: url("https://build.origami.ft.com/files/o-fonts-assets@1.2.0/MetricWeb-Regular.woff");
}
</style>
{% endif %}
<g transform="translate(0,{{margin.top}})"><text font-family="MetricWeb" font-size="{{titleSize}}">{{title}}</text></g>
<g class="polls" transform="translate({{margin.left}},{{margin.top}})">
{% for poll in data %}
    <circle cx="{{poll.x}}" cy="{{poll.y.remain}}" r="{{pollStyle.radius}}" fill="{{pollStyle.remainFill}}" fill-opacity="{{pollStyle.fillOpacity}}"></circle>
    <circle cx="{{poll.x}}" cy="{{poll.y.leave}}" r="{{pollStyle.radius}}" fill="{{pollStyle.leaveFill}}" fill-opacity="{{pollStyle.fillOpacity}}"></circle>
    <circle cx="{{poll.x}}" cy="{{poll.y.undecided}}" r="{{pollStyle.radius}}" fill="{{pollStyle.undecidedFill}}" fill-opacity="{{pollStyle.fillOpacity}}"></circle>
{% endfor %}
</g>

<g class="trends" transform="translate({{margin.left}},{{margin.top}})">
    <path d="{{ line.remain.path }}" fill="none" stroke="{{line.remain.stroke}}" stroke-width="2" ></path>
    <path d="{{ line.leave.path }}" fill="none" stroke="{{line.leave.stroke}}" stroke-width="2"></path>
    <path d="{{ line.undecided.path }}" fill="none" stroke="{{line.undecided.stroke}}" stroke-width="2"></path>
</g>

<g class="x axis" font-family="MetricWeb" transform="translate({{margin.left}},{{height-margin.bottom}})">
{% for tick in xAxis.ticks %}
    <g class="tick" transform="translate({{tick.x}},{{tick.y}})">
        <text>{{tick.label}}</text>
    </g>
{% endfor %}
</g>

<g class="y axis" font-family="MetricWeb" transform="translate( {{ width - margin.right }} , {{ margin.top }} )">
{% for tick in yAxis.ticks %}
    <g class="tick" transform="translate({{ tick.x }}, {{ tick.y }})">
        <text dy="4" fill="{{ tick.fill }}">{{tick.label}}</text>
    </g>
{% endfor %}

{% for rule in yAxis.rules %}
    <g class="rule">
        <text>{{rule.label}}</text>
        <line 
            x1="{{rule.x1}}" 
            y1="{{rule.y1}}" 
            x2="-{{rule.x2}}" 
            y2="{{rule.y1}}" 
            stroke="{{yAxis.ruleStroke}}" 
            stroke-dashArray="{{yAxis.ruleStrokeDashArray}}" 
            stroke-width="{{yAxis.ruleStrokeWidth}}">
        </line>
    </g>
{% endfor %}
</g>
</svg>